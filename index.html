<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Sinerga-Optima – Building the Base</title>
  <meta name="description" content="Post-capitalist upgrade path – public tech guilds, worker co-ops, carbon caps.">
  <link rel="icon" href="assets/img/favicon.png">
  <link rel="stylesheet" href="assets/css/main.css">

  <!-- Gate styles -->
  <style>
    #gateOverlay{position:fixed;inset:0;background:var(--dark);z-index:9999;display:flex;align-items:center;justify-content:center;text-align:center;padding:2rem}
    .gate-box{max-width:420px;width:100%}
    .gate-box h2{margin-bottom:1rem;font-size:1.5rem}
    .gate-box p{margin-bottom:1.5rem;opacity:.9}
    #passInput{width:100%;padding:.75rem;border-radius:var(--radius);border:1px solid var(--amber);background:transparent;color:var(--light);margin-bottom:1rem}
    #passInput::placeholder{color:rgba(255,255,255,.6)}
    .gate-box .btn{width:100%}
    #wrongPass{color:var(--amber);margin-top:.5rem;display:none}
  </style>
</head>

<body>
<!--  UNDER-CONSTRUCTION GATE  -->
<div id="gateOverlay">
  <div class="gate-box">
    <ion-icon name="construct-outline" style="font-size:3rem;color:var(--amber)"></ion-icon>
    <h2>We’re building the foundations</h2>
    <p>Enter the password to continue. (Public launch soon.)</p>
    <input id="passInput" type="password" placeholder="Password" autocomplete="off">
    <button id="unlockBtn" class="btn">Enter Site</button>
    <div id="wrongPass">Incorrect password – try again.</div>
  </div>
</div>

<!--  REAL SITE (hidden until unlocked)  -->
<div id="mainSite" style="display:none">
  <nav>
    <a href="/" class="logo">Sinerga-Optima</a>
    <span>
      <a href="manifesto.html">Manifesto</a>
      <a href="charter.html">Charter</a>
      <a href="toolkit.html">Toolkit</a>
      <a href="mailto:hello@sinerga-optima.org" class="btn">Contact</a>
      <button id="themeToggle" class="btn" aria-label="Toggle dark mode"><ion-icon name="moon"></ion-icon></button>
    </span>
  </nav>

  <main>
    <section id="hero">
      <ion-icon name="leaf-outline" class="hero-icon"></ion-icon>
      <h1>Sinerga-Optima</h1>
      <p>We’re laying the foundations of a post-capitalist upgrade:<br>
         public tech guilds, worker co-ops, carbon-negative growth.</p>
      <strong>Site under construction – more pages launching soon.</strong>

      <div class="social">
        <a href="https://github.com/sinergaoptima" target="_blank" rel="noopener" class="btn">
          <ion-icon name="logo-github"></ion-icon> GitHub
        </a>
        <a href="mailto:hello@sinerga-optima.org" class="btn">
          <ion-icon name="mail"></ion-icon> Email
        </a>
      </div>
    </section>
  </main>

  <footer>
    <p>Built with HTML & CSS • <a href="https://github.com/sinergaoptima" target="_blank" rel="noopener">Source</a></p>
  </footer>
</div>

<!-- Scripts -->
<script>
  const overlay   = document.getElementById('gateOverlay');
  const mainSite  = document.getElementById('mainSite');
  const input     = document.getElementById('passInput');
  const btn       = document.getElementById('unlockBtn');
  const wrong     = document.getElementById('wrongPass');
  const PASS      = 'build2025';

  function unlock() {
    if (input.value.trim() === PASS) {
      overlay.style.display   = 'none';
      mainSite.style.display  = 'block';
      localStorage.setItem('so-gate','open');
    } else {
      wrong.style.display = 'block';
      input.select();          // highlight text for quick retry
    }
  }

  btn.addEventListener('click', unlock);

  // ENTER key on the INPUT field (not document)
  input.addEventListener('keydown', e => {
    if (e.key === 'Enter' || e.keyCode === 13) {
      e.preventDefault(); // stop form submission if any
      unlock();
    }
  });

  // focus cursor + auto-unlock
  input.focus();
  if (localStorage.getItem('so-gate') === 'open') {
    overlay.style.display  = 'none';
    mainSite.style.display = 'block';
  }
</script>


<!-- Fixed Gate Script -->
<script>
  const overlay = document.getElementById('gateOverlay');
  const mainSite = document.getElementById('mainSite');
  const input = document.getElementById('passInput');
  const btn = document.getElementById('unlockBtn');
  const wrong = document.getElementById('wrongPass');

  const PASS = 'build2025';

  btn.addEventListener('click', unlock);
  input.addEventListener('keyup', e => { if (e.key === 'Enter') unlock(); });

  function unlock() {
    if (input.value.trim() === PASS) {
      overlay.style.display = 'none';
      mainSite.style.display = 'block';
      localStorage.setItem('so-gate', 'open');
    } else {
      wrong.style.display = 'block';
      input.focus();
    }
  }

  // auto-unlock if already entered + focus cursor
  input.focus();
  if (localStorage.getItem('so-gate') === 'open') {
    overlay.style.display = 'none';
    mainSite.style.display = 'block';
  }
</script>
</body>
</html>
